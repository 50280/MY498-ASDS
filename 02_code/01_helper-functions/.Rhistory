################# SETUP & PREREQUISITES ########################################
################# GENERAL INFORMATION ##########################################
# The code below is a replication for the following paper:
# Alsan, Marcella, Luca Braghieri, Sarah Eichmeyer, Minjeong Joyce Kim, Stefanie Stantcheva, and David Y. Yang. “Civil Liberties in Times of Crisis.” American Economic Journal: Applied Economics 15, no. 4 (October 2023): 389–421. https://doi.org/10.1257/app.20210736.
################# GENERAL INFORMATION ##########################################
# Code written on:
# - R Version: 4.3.1.
# - Computer: MacBook Pro 14" with Apple M1 chip, 16 GB Memory, 2021 Model.
# - OS System: macOS Sequoia Version 15.0.1.
# Contact Anonymous Student if you have any questions/comments: a.student@lse.ac.uk.
################################################################################
# Before you run this script...
################################################################################
# (1) Clear the working space.
rm(list = ls())
# (2) Set your working directory and save it to the object below, or replace getwd()
# with the path to the output directory where you want to save your data.
wdir <- getwd()
# (4) Set the toggle below to TRUE if you want to save the different outputs
# computed in this project, and FALSE if you do not want to save these outputs.
to_save <- TRUE
# (5) You need to downlaod the following replication package to your working
# directory through the following link: https://www.aeaweb.org/articles?id=10.1257%2Fapp.20210736
# This is free of charge, but you have to identify yourself and accept the terms of service.
# (3) If you want to download the replication package for Aslan et al. (2023)
# directly to your working directory, set the toggle below to TRUE.
download_repl_pack <- TRUE
################################################################################
# PREREQUISITES
################################################################################
# (1) List required packages.
needed_packages <- c("tidyverse", "haven", "fixest", "modelsummary", "AER", "gt")
library(stringr)
library(sandwich)
# (2) Identify which/whether packages are missing.
missing_packages <- needed_packages[!(needed_packages %in% installed.packages()[, "Package"])]
# (3) Install any missing packages.
if (length(missing_packages) > 0) {
install.packages(missing_packages)
}
# (4) Load all required packages.
invisible(lapply(needed_packages, library, character.only = TRUE))
# (5) Set seed for reproducibility.
set.seed(89)
################################################################################
# DIRECTORY MANAGEMENT
################################################################################
# (0) Define path to helper functions.
helper_functions_path <- paste0(wdir, "/01_code/01_helper_functions/")
data_path <- paste0(wdir, "/paper-1-replication-materials/2input_data/")
tables_path <- paste0(wdir, "/04_tables")
################# SOURCE REQUIRED FUNCTIONS ####################################
# Sourcing them from the helper function path.
# (1) Source the function to clean the longitudinal dataset.
source(paste0(helper_functions_path, "clean_longitudinal_data.R"))
# (2) Source the function used to dichotomise outcomes.
source(paste0(helper_functions_path, "dichotomise_outcomes.R"))
###### OVERALL INFORMATION ABOUT APPROACH TAKEN IN THIS SCRIPT.
# Initially, the aim was to reproduce exactly the same results as the initial authors.
# Then, their choices were questioned, and additional analyses implemented.
# And to facilitate comparability between the different scripts, the same variable names were adopted as in the .do stata files.
# Throughout this script, IV1 refers to the first IV, and IV2 refers to the second IV with the randomised experiment.
#### INCLUDE CODE HERE ON HOW TO LOAD / PRINT THE ORIGINAL .DO STATA FILES IN R -
## TO FACILITATE COMPARISON WITH WHAT THE ORIGINAL AUTHORS DID.
# (1) Load the data from the replication package.
longitudinal_data <- read_dta(paste0(data_path, "longitudinal_survey.dta"))
